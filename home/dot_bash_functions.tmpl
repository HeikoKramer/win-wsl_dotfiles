# {{- /* Generated from common/shortcuts.yml and common/functions.yml via chezmoi (Linux only) */ -}}
{{- $shortcuts := (include "common/shortcuts.yml" | fromYaml) -}}
{{- $functions := (include "common/functions.yml" | fromYaml) -}}
{{- $shortcutFunctionRefs := dict -}}
{{- range $shortcuts -}}
  {{- if and .cmd (hasKey .cmd "fromFunctions") -}}
    {{- $_ := set $shortcutFunctionRefs .name true -}}
  {{- end -}}
{{- end -}}

# --- DO NOT EDIT THIS FILE DIRECTLY ---
# This file is generated by chezmoi from the YAML files in common/.
# Edit the YAML (shortcuts.yml or functions.yml) instead.

# Helper: list shortcuts/functions, optionally filter by category
# Usage: shortcuts or shortcuts DIRS
shortcuts() {
  local filter="$1"
  printf "%-12s %-10s %-s\n" "name" "cat" "desc"
  {{- range $shortcuts }}
  {{- $cmd := .cmd -}}
  {{- if or (and $cmd (hasKey $cmd "linux")) (and $cmd (hasKey $cmd "both")) (and $cmd (hasKey $cmd "fromFunctions")) }}
  if [ -z "$filter" ] || [ "$filter" = "{{ .cat }}" ]; then
    printf "%-12s %-10s %-s\n" "{{ .name }}" "{{ .cat }}" "{{ .desc }}"
  fi
  {{- end }}
  {{- end }}
  {{- range $functions }}
  {{- if and .linux (not (hasKey $shortcutFunctionRefs .name)) }}
  if [ -z "$filter" ] || [ "$filter" = "{{ .cat }}" ]; then
    printf "%-12s %-10s %-s\n" "{{ .name }}" "{{ .cat }}" "{{ .desc }}"
  fi
  {{- end }}
  {{- end }}
}

functions() {
  local filter="$1"
  printf "%-12s %-10s %-s\n" "name" "cat" "desc"
  {{- range $functions }}
  {{- if and .linux (not (hasKey $shortcutFunctionRefs .name)) }}
  if [ -z "$filter" ] || [ "$filter" = "{{ .cat }}" ]; then
    printf "%-12s %-10s %-s\n" "{{ .name }}" "{{ .cat }}" "{{ .desc }}"
  fi
  {{- end }}
  {{- end }}
}

# Render one function per shortcut/function (Linux command preferred, else 'both')
{{- range $shortcuts }}
{{- $cmd := .cmd -}}
{{- if and $cmd (not (hasKey $cmd "fromFunctions")) (hasKey $cmd "linux") }}
{{ .name }}() {
  {{ index $cmd "linux" }} "$@"
}

{{- else if and $cmd (not (hasKey $cmd "fromFunctions")) (hasKey $cmd "both") }}
{{ .name }}() {
  {{ index $cmd "both" }} "$@"
}

{{- end }}
{{- end }}
{{- range $functions }}
{{- if .linux }}
{{ .name }}() {
{{- nindent 2 .linux }}
}

{{- end }}
{{- end }}
